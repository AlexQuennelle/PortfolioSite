<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Voxel Loader</title>
  <link rel="stylesheet" href="../../style.css" />

  <!-- highlight.js -->
  <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11/styles/github.min.css"
    media="(prefers-color-scheme: light)" />
  <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11/styles/github-dark.min.css"
    media="(prefers-color-scheme: dark)" />
  <style>
    pre.code-wrapper {
      padding: 0;
    }
  </style>
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11/highlight.min.js"></script>
  <script>
      //hljs.highlightAll();
  </script>
  <!-- Initialize highlight.js -->
</head>
<header>
  <nav>
    <a href="../../index.html">Home</a>
    <!-- Link back to the main index -->
  </nav>
  <h1>Voxel Loader</h1>
  <script src="../../style.js"></script>
</header>
<main>
  <section>
    <figure>
      <iframe src="VoxelLoader_1.0_web/VoxelLoader.html" loading="lazy" scrolling="no" style="border: none" id="frame"
        onload="accessiFrameContent()"></iframe>
      <script></script>
      <figcaption>
        Click and drag to rotate, refresh page for a different model
      </figcaption>
    </figure>
  </section>
  <section id="desc">
    <h2>Description</h2>
    <p>
      This project reads binary .vox files generated by
      <a href="https://ephtracy.github.io/">MagicaVoxel</a> and outputs the
      voxel model using <a href="https://www.raylib.com/">Raylib</a>. The main
      learning goal for the project was to familiarize myself with binary file
      input in C++, as well as parsing the resulting data. After that initial
      goal, A secondary learning goal came about in learning to compile C++
      and Raylib projects to WebAssembly using
      <a href="https://emscripten.org/">Emscripten</a> and configuring it to
      work with my existing build pipeline.
    </p>
    <p>
      In the course of building this project, I was able to familiarize myself
      with pointer arithmatic and memory manipulation operations in the C++
      standard library. I had to find a way to iterate over an array of raw
      byte data with irregularly sized hunks of data. Luckily, the .vox files
      provide headers for each chunk of data that specify what type of chunk
      it is and how many bytes it occupies. I was able to do this by creating
      a pseudo 'for' loop where a while loop checks the offset of a byte
      pointer against the total size of the file being processed. The byte
      pointer is then used as the starting point for each chunk of data, and
      is incremented by the size of the chunk afterwards. I really enjoyed
      implementing this, as it felt very satisfying to successfully read and
      interpret raw byte data.
    </p>
  </section>
  <section class="stretch">
    <h2>Source Code</h2>
    <div class="tab">
      <button class="tablinks lang" onclick="openTab(event, 'cmakelists', 'lang')">
        CmakeLists.txt
      </button>
      <button class="tablinks lang" onclick="openTab(event, 'C++', 'lang')">
        C++
      </button>
    </div>
    <div class="tabcontent lang" id="cmakelists">
      <h3>cmakelists</h3>
      <pre><code id="cmakelists.txt"></code></pre>
    </div>
    <div class="tabcontent lang" id="C++">
      <h3>C++</h3>
      <div>
        <button class="tablinks file" onclick="openTab(event, 'main', 'file')">
          main.cpp
        </button>
        <button class="tablinks file" onclick="openTab(event, 'model', 'file')">
          model.cpp
        </button>
        <button class="tablinks file" onclick="openTab(event, 'volume', 'file')">
          volume.cpp
        </button>
      </div>
      <div class="tabcontent file" id="main">
        <pre><code id="main.txt"></code></pre>
      </div>
      <div class="tabcontent file" id="model">
        <pre><code id="model.txt"></code></pre>
      </div>
      <div class="tabcontent file" id="volume">
        <pre><code id="volume.txt"></code></pre>
      </div>
    </div>
    <script>
      openFirstTab("lang");
      openFirstTab("file");
      fetchCode("", "cmakelists.txt");
      fetchCode("", "main.txt");
      fetchCode("", "model.txt");
      fetchCode("", "volume.txt");
    </script>
  </section>
</main>

</html>
